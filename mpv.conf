# mpv configuration. This was generated using Glow and is only compatible with Windows.
# See:
#   1. https://mpv.io/manual/master
#   2. https://glowmpv.github.io
#   3. https://iamscum.wordpress.com/guides/videoplayback-guide/mpv-conf

# +----------+
# + Profiles +
# +----------+
include="~~/profiles.conf"

# +---------+
# + General +
# +---------+

# The last position of your video is saved when quitting mpv
save-position-on-quit=yes

# Force seeking (if seeking doesn't work)
force-seekable=yes

# Set process priority for mpv according to the predefined priorities available under Windows
priority=abovenormal

# Disable default-level ("weak") key bindings.
# These are bindings which config files like input.conf can override.
# It currently affects the builtin key bindings, and keys which scripts bind using mp.add_key_binding (but not mp.add_forced_key_binding because this overrides input.conf)
no-input-default-bindings

# Decides what to do if the input has an alpha component
alpha=blend

# (Windows only) Snap the player window to screen edges
snap-window

# Set the window title
# This is used for the video window, and if possible, also sets the audio stream title
#
# Properties are expanded, see: https://mpv.io/manual/stable/#property-expansion
#
# WARNING
# There is a danger of this causing significant CPU usage, depending on the properties used
# Changing the window title is often a slow operation, and if the title changes every frame, playback can be ruined
title="${media-title}"

# Set the image file type used for saving screenshots
screenshot-format=png

# Store screenshots in this directory. This path is joined with the filename generated by `--screenshot-template`
# If the template filename is already absolute, the directory is ignored.
# If the directory does not exist, it is created on the first screenshot
# If it is not a directory, an error is generated when trying to write a screenshot
screenshot-directory="~/Pictures/Capturas de Tela"

# Loops playback N times. A value of 1 plays it one time (default), 2 two times, etc. inf means forever
# `no` is the same as 1 and disables looping
# If several files are specified on command line, the entire playlist is looped
# `--loop-playlist` is the same as `--loop-playlist=inf`
#
# The `force` mode is like inf, but does not skip playlist entries which have been marked as failing
# This means the player might waste CPU time trying to loop a file that doesn't exist
# But it might be useful for playing webradios under very bad network conditions
loop-playlist=no

# Loop a single file N times. inf means forever, no means normal playback
# For compatibility, `--loop-file` and `--loop-file=yes` are also accepted, and are the same as `--loop-file=inf`
#
# The difference to `--loop-playlist` is that this doesn't loop the playlist, just the file itself
# If the playlist contains only a single file, the difference between the two option is that this option performs a seek on loop, instead of reloading the file
#
# NOTE
# `--loop-file` counts the number of times it causes the player to seek to the beginning of the file, not the number of full playthroughs
# This means `--loop-file=1` will end up playing the file twice. Contrast with `--loop-playlist`, which counts the number of full playthroughs
loop-file=no

# +-------+
# + Video +
# +-------+

# Lazy quality profile which sets some recommended settings
profile=gpu-hq

# Video output driver
# Use "gpu" for a more stable output driver instead
# Keep in mind that some options won't work with "gpu"
# See: https://github.com/mpv-player/mpv/wiki/GPU-Next-vs-GPU
vo=gpu-next

# Called API
# Use "opengl" if you have compatibility issues.
gpu-api=vulkan

# Hardware decoding for whatever your CPU/GPU supports (e.g. 8bit h264 / 10bit h265)
# Only should be used when your CPU/GPU are very old, else avoid using it
# Use "auto-copy-safe" for the safest result in trade of better performance
# You can manually try "dxva2-copy" on Windows, "vaapi" / "vaapi-copy" on Linux or "nvdec" / "nvdec-copy" with a Nvidia GPUs (recommended)
hwdec=nvdec-copy

# +-----------+
# + Dithering +
# +-----------+

# Use "auto" or "8"/"10"/"12" depending on your display bitdepth
# `no` is also safe to use in case of a 10 or 12 bitdepth display
# Can lead to ugly outputs when you set the wrong number or disable it entirely
dither-depth=10

# Selects the dithering algorithm
# Use "error-diffusion" with high-end GPUs (experimental), else use "fruit"
dither=error-diffusion

# Selects the kernel in case of error-diffusion
error-diffusion=burkes

# +---------------------+
# + HDR->SDR conversion +
# +---------------------+

# Specifies the algorithm used for tone-mapping images onto the target display
# This is relevant for both HDR->SDR conversion as well as gamut reduction
tone-mapping=bt.2446a

# Controls how the tone mapping function is applied to colors
tone-mapping-mode=luma

# +---------+
# + Scaling +
# +---------+

scale=ewa_lanczos
dscale=ewa_lanczos
cscale=ewa_lanczos
scale-blur=0.981251

# Extend the filter size when downscaling with convolution based filters
correct-downscaling=yes

# Light downscaling method
linear-downscaling=yes

# Light upscaling method
# `sigmoid-upscaling` creates less ringing and better results overall
linear-upscaling=yes
sigmoid-upscaling=yes

# +--------------+
# + Anti-ringing +
# +--------------+

# Luma upscale deringing (Higher = Less rining, but more detail loss)
scale-antiring=0.7

# Luma downscale deringing (Higher = Less rining, but more detail loss)
dscale-antiring=0.7

# Chroma upscale deringing (Higher = Less rining, but more detail loss)
cscale-antiring=0.7

# +---------------+
# + Interpolation +
# +---------------+

# Set the fps as the max. of your monitor Hz (only useful and needed with "interpolation=yes)
video-sync=display-resample

# Activate interpolation
interpolation=no

# Interpolation method
tscale=sphinx
tscale-blur=0.6991556596428412
tscale-radius=1.0 #lower (e.g. 0.955) = sharper; higher (e.g. 1.005) = smoother
tscale-clamp=0.0

# THIS OPTION HAS NO EFFECT WITH "vo=gpu"
# Trade smoothness for performance (disables dynamic updates)
interpolation-preserve=yes

# +-------+
# + Audio +
# +-------+

# Default volume of the player
volume=50

# Load external audio with (almost) the same name as the video
audio-file-auto=fuzzy

# Won't ignore subtitles tagged as "Forced"
subs-with-matching-audio=no

# Specify a priority list of audio languages to use
# Different container formats employ different language codes
#
# DVDs use ISO 639-1 two-letter language codes
# Matroska, MPEG-TS and NUT use ISO 639-2 three-letter language codes
# OGM uses a free-form identifier
alang=pt,por,Portuguese,eng,en,enUS,en-US,English,jpn,jp,jap,Japanese

# +-----------+
# + Subtitles +
# +-----------+

# Adjust subtitle timing is to remove minor gaps or overlaps between subtitles (if the difference is smaller than 210 ms, the gap or overlap is removed)
sub-fix-timing=yes

# Blend subtitles directly onto upscaled video frames, before interpolation and/or color management (default: no)
# Enabling this causes subtitles to be affected by `--icc-profile`, `--target-prim`, `--target-trc`, `--interpolation`, `--gamma-factor` and `--glsl-shaders`
# It also increases subtitle performance when using `--interpolation`
#
# The downside of enabling this is that it restricts subtitles to the visible portion of the video, so you can't have subtitles exist in the black margins below a video (for example)
#
# If `video` is selected, the behavior is similar to `yes`, but subs are drawn at the video's native resolution, and scaled along with the video
#
# WARNING
#
# This changes the way subtitle colors are handled
# Normally, subtitle colors are assumed to be in sRGB and color managed as such
# Enabling this makes them treated as being in the video's color space instead
# This is good if you want things like softsubbed ASS signs to match the video colors, but may cause SRT subtitles or similar to look slightly off
blend-subtitles=yes

# Load additional subtitle files matching the video filename
sub-auto=fuzzy

# Specify the sub font size
# The unit is the size in scaled pixels at a window height of 720
# The actual pixel size is scaled with the window height: if the window height is larger or smaller than 720, the actual size of the text increases or decreases as well
sub-font-size=32

# Format text on bold
sub-bold=yes

# Specify the color used for unstyled text subtitles
sub-color='#ffeffd5f'

# See `--sub-color`
# Color used for sub text background
# You can use `--sub-shadow-offset` to change its size relative to the text
sub-back-color='#00000000'

# See `--sub-color`
# Color used for the sub font border
sub-border-color='#ff1c1b22'

# See `--sub-color`
# Color used for sub text shadow
#
# NOTE
#
# Ignored when `--sub-back-color` is specified (or more exactly: when that option is not set to completely transparent)
sub-shadow-color='#AA000000'

# See: https://mpv.io/manual/stable/#options-demuxer-mkv-subtitle-preroll
demuxer-mkv-subtitle-preroll=yes

# Specify a priority list of subtitle languages to use
# Different container formats employ different language codes
#
# DVDs use ISO 639-1 two-letter language codes
# Matroska, MPEG-TS and NUT use ISO 639-2 three-letter language codes
# OGM uses a free-form identifier
slang=pt,por,Portuguese,eng,en,enUS,en-US,English

# +--------+
# + Stream +
# +--------+
ytdl=yes
ytdl-format=bestvideo[ext=mp4][width<=1920][height<=1080]+bestaudio[ext=m4a]/best[ext=mp4]/best

# +------+
# + UOSC +
# +------+
osc=no
osd-bar=no
border=no
keep-open=yes
